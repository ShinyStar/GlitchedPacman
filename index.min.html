<!doctype html><head><title>p̯͟a̼̫c̯͝m̭͇a̷͈n̦̕</title></head><body style="background:black;text-align:center;color:white"><canvas id="c"></canvas><br/><p id="score">Score:0</p><p id="life">Life:3</p><br>Use arrow keys to move,A or D to glitch!<script>tile=24;gamestate=0;a=new Image();a.src="a.png";context=c.getContext("2d");context.imageSmoothingEnabled=false;c.width=context.width=456;c.height=context.height=552;map=[];truetimer=0;timer=0;setInterval(function(){switch(gamestate){case 0:timer++;context.fillStyle="black";context.fillRect(0,0,456,552);context.font='100px Verdana, Geneva, sans-serif';context.textBaseline='top';context.textAlign="center";context.lineWidth=30;for(i=0;i<30;i++){for(j=0;j<20;j++){if(Math.random()>0.5){context.drawImage(a,tile,tile*2,tile,tile,i*24,j*24,24,24)}}}context.fillStyle="blue";context.globalAlpha=0.3;context.fillText('p̯͟a̼@c̯͝m̭aA͇͇aA̷̷͈͈n̦̕',100+Math.round(Math.random()*14-7),50+Math.round(Math.random()*14-7));context.fillStyle="red";context.fillText('p̯͟a̼#̫̫Cc̯͝m̭͇a̷͈An̦̕',300+Math.round(Math.random()*50-7),150+Math.round(Math.random()*50-7));context.fillStyle="green";context.fillText('p̯͟a̼$c̯͝m̭͇a%̷̷͈͈n̦̕',400+Math.round(Math.random()*50-7),200+Math.round(Math.random()*50-7));context.fillStyle="cyan";context.fillText('p̯͟a̼c̯͝m̭͇a̷͈shen̦̕Nlp',Math.round(Math.random()*50-7),Math.round(Math.random()*50-7));context.globalAlpha=1;context.fillStyle="white";context.fillText('p̯͟a̼̫c̯͝m̭͇a̷͈n̦̕',230+Math.round(Math.random()*14-7),120+Math.round(Math.random()*14-7));break;case 2:timer++;context.fillStyle="black";context.fillRect(0,0,456,552);context.font='90px Verdana, Geneva, sans-serif';context.textBaseline='top';context.textAlign="center";context.lineWidth=30;for(i=0;i<30;i++){for(j=0;j<20;j++){if(Math.random()>0.5){context.drawImage(a,tile,tile*2,tile,tile,i*24,j*24,24,24)}}}context.fillStyle="blue";context.globalAlpha=0.3;context.fillText('Over',100+Math.round(Math.random()*14-7),50+Math.round(Math.random()*14-7));context.fillStyle="red";context.fillText('Over',300+Math.round(Math.random()*50-7),150+Math.round(Math.random()*50-7));context.fillStyle="green";context.fillText('Over',400+Math.round(Math.random()*50-7),200+Math.round(Math.random()*50-7));context.fillStyle="cyan";context.fillText('Over',Math.round(Math.random()*50-7),Math.round(Math.random()*50-7));context.globalAlpha=1;context.fillStyle="white";context.fillText('Game',230+Math.round(Math.random()*14-7),120+Math.round(Math.random()*14-7));context.fillText('Over',230+Math.round(Math.random()*14-7),170+Math.round(Math.random()*14-7));break;case 3:timer++;context.fillStyle="black";context.fillRect(0,0,456,552);context.font='90px Verdana, Geneva, sans-serif';context.textBaseline='top';context.textAlign="center";context.lineWidth=30;for(i=0;i<30;i++){for(j=0;j<20;j++){if(Math.random()>0.5){context.drawImage(a,tile,tile*2,tile,tile,i*24,j*24,24,24)}}}context.fillStyle="blue";context.globalAlpha=0.3;context.fillText('Win',100+Math.round(Math.random()*14-7),50+Math.round(Math.random()*14-7));context.fillStyle="red";context.fillText(':D',300+Math.round(Math.random()*50-7),150+Math.round(Math.random()*50-7));context.fillStyle="green";context.fillText('Win',400+Math.round(Math.random()*50-7),200+Math.round(Math.random()*50-7));context.fillStyle="cyan";context.fillText(':D',Math.round(Math.random()*50-7),Math.round(Math.random()*50-7));context.globalAlpha=1;context.fillStyle="white";context.fillText('You',230+Math.round(Math.random()*14-7),120+Math.round(Math.random()*14-7));context.fillText('Win!',230+Math.round(Math.random()*14-7),200+Math.round(Math.random()*14-7));break;case 1:truetimer+=0.5;timer=Math.round(truetimer);context.fillStyle="blue";context.fillRect(0,0,456,552);canMove=canMove%3;if(canMove==0){for(i=1;i<=4;i++){if(players[i].x==players[0].x&&players[i].y==players[0].y){if(scared==0){life--;document.getElementById("life").innerHTML="Life: "+life;if(life==0){setTimeout(function(){gamestate=2},600)}}else{players[i].x=9;players[i].y=11}}}movePlayer(x,y,0);for(i=1;i<=4;i++){if(players[i].x==players[0].x&&players[i].y==players[0].y){if(scared==0){life--;document.getElementById("life").innerHTML="Life: "+life;if(life==0){setTimeout(function(){gamestate=2},600)}}else{players[i].x=9;players[i].y=11}}}Blinky();movePlayer(BX,BY,1);Pinky();movePlayer(PX,PY,2);Inky();movePlayer(IX,IY,3);Clyde();movePlayer(CX,CY,4)}canMove++;if(scared>0){scared--}for(i=0;i<19;i++){for(j=0;j<23;j++){switch(map[i][j]){case 0:context.drawImage(a,0,(7*i+5*j+50)%(tile*2),tile,tile,i*24,j*24,24,24);break;case 1:context.drawImage(a,tile,0,tile,tile,i*24,j*24,24,24);break;case 2:context.drawImage(a,0,(7*i+5*j+50)%(tile*2),tile,tile,i*24,j*24,24,24);context.drawImage(a,tile*(3+(timer%2)),0,tile,tile,i*24,j*24,24,24);break;case 3:context.drawImage(a,0,(7*i+5*j+50)%(tile*2),tile,tile,i*24,j*24,24,24);context.drawImage(a,tile*5,0,tile,tile,i*24,j*24,24,24);break}}}players.forEach(function(x){context.save();context.translate(x.x*24+10,x.y*24+10);context.rotate(x.r);if(x.id==0&&life<1){context.drawImage(a,2*tile,0,tile,tile,-10,0,24,24)}else if(x.id!=0&&scared!=0){context.drawImage(a,tile*6,0,tile,tile,-10,-10,24,24)}else{context.drawImage(a,tile*2+tile*x.id,tile*(1+timer%2),tile,tile,-10,-10,24,24)}context.restore()});break}},100);function init(){dead=-1;score=0;life=3;canMove=0;scared=0;document.getElementById("score").innerHTML="Score: "+score;document.getElementById("life").innerHTML="Life: "+life;for(i=0;i<19;i++){map[i]=[];for(j=0;j<23;j++){map[i][j]=2}}x=0;y=0;BX=0;BY=0;PX=0;PY=0;IX=0;IY=0;CX=0;CY=0;players=[{x:9,y:13,id:0,r:Math.PI/2},{x:7,y:8,id:1,r:-Math.PI/2},{x:11,y:8,id:2,r:-Math.PI/2},{x:11,y:6,id:3,r:-Math.PI/2},{x:12,y:8,id:4,r:-Math.PI/2}];players.forEach(function(x){map[x.x][x.y]=0});gamestate=1;for(i=0;i<19;i++){if(i==0||i==18){for(j=0;j<23;j++){map[i][j]=1}}else{map[i][0]=1;map[i][22]=1}}map[2][2]=1;map[2][3]=1;map[3][2]=1;map[3][3]=1;map[5][2]=1;map[5][3]=1;map[6][2]=1;map[6][3]=1;map[7][2]=1;map[7][3]=1;map[9][1]=1;map[9][2]=1;map[9][3]=1;map[2][5]=1;map[3][5]=1;map[7][5]=1;map[8][5]=1;map[9][5]=1;map[9][6]=1;map[9][7]=1;map[5][5]=1;map[5][6]=1;map[5][7]=1;map[5][8]=1;map[5][9]=1;map[6][7]=1;map[7][7]=1;map[1][7]=1;map[2][7]=1;map[3][7]=1;map[3][8]=1;map[3][9]=1;map[2][9]=1;map[1][9]=1;map[0][8]=0;map[1][8]=0;map[2][8]=0;map[0][10]=2;map[8][9]=1;map[7][9]=1;map[7][10]=1;map[7][11]=1;map[7][12]=1;map[8][12]=1;map[9][12]=1;map[8][10]=0;map[9][10]=0;map[10][10]=0;map[8][11]=0;map[9][11]=0;map[1][11]=1;map[2][11]=1;map[3][11]=1;map[3][12]=1;map[3][13]=1;map[3][14]=1;map[2][14]=1;map[1][14]=1;map[0][12]=0;map[0][13]=0;map[1][12]=0;map[2][12]=0;map[1][13]=0;map[2][13]=0;map[5][11]=1;map[5][12]=1;map[5][13]=1;map[5][14]=1;map[7][14]=1;map[8][14]=1;map[9][14]=1;map[9][15]=1;map[9][16]=1;map[5][16]=1;map[6][16]=1;map[7][16]=1;map[2][16]=1;map[3][16]=1;map[3][17]=1;map[3][18]=1;map[1][18]=1;map[2][20]=1;map[3][20]=1;map[4][20]=1;map[5][20]=1;map[6][20]=1;map[7][20]=1;map[5][19]=1;map[5][18]=1;map[7][18]=1;map[8][18]=1;map[9][18]=1;map[9][19]=1;map[9][20]=1;map[9][9]=1;map[1][2]=3;map[1][16]=3;k=0;for(i=18;i>9;i--){for(j=1;j<21;j++){map[i][j]=map[k][j]}k++}}window.addEventListener("keydown",function(e){switch(gamestate){case 0:init();break;case 2:case 3:gamestate=0;break;case 1:if(e.keyCode==37){x=-1;y=0}else if(e.keyCode==39){x=1;y=0}else if(e.keyCode==38){y=-1;x=0}else if(e.keyCode==40){y=1;x=0}if(e.keyCode==65){glitch(0)}else if(e.keyCode==68){glitch(1)}break}});function movePlayer(x,y,i){players[i].r=Math.atan2(y,x)+Math.PI/2;if(map[players[i].x+x]&&(map[players[i].x+x][players[i].y+y]==0||map[players[i].x+x][players[i].y+y]==2||map[players[i].x+x][players[i].y+y]==3||map[players[i].x+x][players[i].y+y]==4)){players[i].x+=x;players[i].y+=y}else{if(players[i].x+x>18&&map[0][players[i].y]!=1){players[i].x=0}else if(players[i].y+y>22&&map[players[i].x][0]!=1){players[i].y=0}else if(players[i].x+x<0&&map[18][players[i].y]!=1){players[i].x=18}else if(players[i].y+y<0&&map[players[i].x][22]!=1){players[i].y=22}}if(i==0&&map[players[i].x][players[i].y]==2){score++;document.getElementById("score").innerHTML="Score: "+score;map[players[i].x][players[i].y]=0;if(score==192){setTimeout(function(){gamestate=3},400)}}if(i==0&&map[players[i].x][players[i].y]==3){score++;document.getElementById("score").innerHTML="Score: "+score;map[players[i].x][players[i].y]=0;if(score==192){setTimeout(function(){gamestate=3},400)}scared=50}}function chooseDir(currentx,currenty,targetx,targety,gx,gy){r=true;l=true;u=true;d=true;if(gx==1){l=false}if(gx==-1){r=false}if(gy==1){u=false}if(gy==-1){d=false}if(map[currentx+1]&&map[currentx+1][currenty]==1){r=false}if(map[currentx-1]&&map[currentx-1][currenty]==1){l=false}if(map[currentx][currenty+1]&&map[currentx][currenty+1]==1){d=false}if(map[currentx][currenty-1]&&map[currentx][currenty-1]==1){u=false}if(players[1].x+x>18&&map[0][players[1].y]==1){r=false}else if(players[1].y+y>22&&map[players[1].x][0]!=1){d=false}else if(players[1].x+x<0&&map[18][players[1].y]!=1){l=false}else if(players[1].y+y<0&&map[players[1].x][22]!=1){u=false}xdistTarget=Math.abs(currentx-targetx);ydistTarget=Math.abs(currenty-targety);if(xdistTarget>ydistTarget){if(targetx>currentx&&r){gx=1;gy=0}else if(targetx<currentx&&l){gx=-1;gy=0}else{if(targety>currenty&&d){gx=0;gy=1}else if(targety<currenty&&u){gx=0;gy=-1}else{if(u){gx=0;gy=-1}else if(l){gx=-1;gy=0}else if(d){gx=0;gy=1}else{gx=1;gy=0}}}}else{if(targety>currenty&&d){gx=0;gy=1}else if(targety<currenty&&u){gx=0;gy=-1}else{if(targetx>currentx&&r){gx=1;gy=0}else if(targetx<currentx&&l){gx=-1;gy=0}else{if(u){gx=0;gy=-1}else if(l){gx=-1;gy=0}else if(d){gx=0;gy=1}else{gx=1;gy=0}}}}return{x:gx,y:gy}}function Blinky(){if(scared==0){dir=chooseDir(players[1].x,players[1].y,players[0].x,players[0].y,BX,BY)}else{dir=chooseDir(players[1].x,players[1].y,0,0,BX,BY)}BX=dir.x;BY=dir.y}function Pinky(){if(scared==0){dir=chooseDir(players[2].x,players[2].y,players[0].x+x*4,players[0].y+y*4,PX,PY)}else{dir=chooseDir(players[2].x,players[2].y,19,0,PX,PY)}PX=dir.x;PY=dir.y}function Inky(){if(scared==0){blinkyX=players[0].x+2*x-players[1].x;blinkyY=players[0].y+2*y-players[1].y;dir=chooseDir(players[3].x,players[3].y,blinkyX*2,blinkyY*2,IX,IY)}else{dir=chooseDir(players[3].x,players[3].y,0,22,IX,IY)}IX=dir.x;IY=dir.y}function Clyde(){if(scared==0){toplayerx=Math.abs(players[0].x-players[4].x);toplayery=Math.abs(players[0].y-players[4].y);if(toplayerx<8&&toplayery<8){dir=chooseDir(players[4].x,players[4].y,0,22,CX,CY)}else{dir=chooseDir(players[4].x,players[4].y,players[0].x,players[0].y,CX,CY)}}else{dir=chooseDir(players[4].x,players[4].y,19,24,CX,CY)}CX=dir.x;CY=dir.y}function glitch(side){if(side){i1=10;i2=19}else{i1=0;i2=9}aux=[];for(i=i1;i<i2;i++){aux[i]=map[i][22]}for(i=i1;i<i2;i++){for(j=22;j>0;j--){map[i][j]=map[i][j-1]}}for(i=i1;i<i2;i++){map[i][0]=aux[i]}if(players[0].x>=i1&&players[0].x<i2){players[0].y=players[0].y+1;if(players[0].y>22){players[0].y=0}}context.drawImage(a,tile,tile,tile,tile,players[0].x*24,players[0].y*24,24,24);for(i=i1;i<i2;i++){for(j=0;j<23;j++){if(Math.random()>0.5){context.drawImage(a,tile,tile*2,tile,tile,i*24,j*24,24,24)}}}}</script></body>